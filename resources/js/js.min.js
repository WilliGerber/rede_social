$(document).ready(function(){$(".date").mask("11/11/1111"),$(".time").mask("00:00:00"),$(".date_time").mask("00/00/0000 00:00:00"),$(".cep").mask("00000-000"),$(".phone").mask("0000-0000"),$(".phone_with_ddd").mask("(00) 00000-0000"),$(".phone_us").mask("(000) 000-0000"),$(".mixed").mask("AAA 000-S0S"),$(".cpf").mask("000.000.000-00",{reverse:!0}),$(".money").mask("000.000.000.000.000,00",{reverse:!0});var n,a=new FileReader;function e(e,a,s=!0){var i="http://localhost/rede_social/";$.ajax({url:i+"getPublishes",dataType:"json",method:"POST",data:{page_index:e,user_id:a,feed:s},success:function(e){var s="";if(console.log(e),$.each(e.publishes,function(e,a){s+='<div class="item" id="'+a.id+'"><div class="topo"><a href="'+i+"feed/"+a.profile_url+'"><img src="'+i+a.user_avatar+'" alt="Foto de '+a.user_name+" "+a.user_lastName+'"></a><a href="'+i+"feed/"+a.profile_url+'"><span>'+a.user_name+" "+a.user_lastName+'</span></a></div><div class="info">',null!=a.text&&(s+='<div class="text">'+a.text+"</div>"),0!=a.fotos&&(1<a.fotos.length?s+='<div class="gallery slider" id="gallery_'+a.id+'">':s+='<div class="gallery">',$.each(a.fotos,function(e,a){s+='<img src="'+i+a.foto_path+'" alt="">'}),s+="</div>"),s+="</div></div>"}),$(".publicacoes").append(s),null!=e.next_page?$("#page_index").val(e.next_page):$("#page_index").remove(),$(".gallery.slider").length)for(var a=$(".gallery.slider");n<a.length;n++){var t=$(".gallery.slider")[n].id;$("#"+t).slick({infinite:!1})}}})}a.onload=function(e){$("#img-config").css("background-image","url("+e.target.result+")"),$("#img-config").attr("src","")},$("#campo-img").change(function(){var e;(e=this).files&&e.files[0]&&a.readAsDataURL(e.files[0])}),$(".img_thumb").on("click",function(){var e=$(".img_cover"),a=$(this).attr("src");e.attr("src")!==a&&e.fadeTo("200","0",function(){e.attr("src",a),e.fadeTo("150","1")}),$(".img_thumb.active").removeClass("active"),$(this).addClass("active")}),$(".publicar .exibir").on("click",function(){$(this).next().addClass("active"),$("body").addClass("active-lightbox")}),$(".lightbox .close").on("click",function(){$(this).parent().removeClass("active"),$("body").removeClass("active-lightbox")}),$(".content.feed").length&&(e($("#page_index").val(),$("#user_id").val()),n=0,$(window).scroll(function(){$(window).scrollTop()==$(document).height()-$(window).height()&&e($("#page_index").val(),$("#user_id").val())})),$(".lista_mensagens").length&&($(".lista_mensagens .item").on("click",function(){$(".content.mensagens .conteudo.oculto").removeClass("oculto");var e=$(this).attr("id");$(".item.active").removeClass("active"),$(this).addClass("active"),$.ajax({url:"getMessages",dataType:"json",method:"POST",data:{ids:e},success:function(s){$(".conteudo_mensagem .topo a img").attr("src",s.user_avatar),$(".conteudo_mensagem .topo a .nome").html(s.user_name),$(".conteudo_mensagem .topo a").attr("href",s.profile_url),$(".content.mensagens .conteudo .msgs .form_ajax .id_user_receive").val(s.id_otherUser);var t="";$.each(s.messages,function(e,a){a.id_sender==s.id_logedIn?t+='<div class="mine message">':t+='<div class="his message">',t=t+a.message+"</div>"}),$(".conteudo_mensagem .lista_msg").html(t),$(".conteudo_mensagem .lista_msg").click($(".conteudo_mensagem .lista_msg").animate({scrollTop:50*s.messages.length},"1000"))}})}),$(".lateral_esquerda .lista_mensagens .item").length&&($(".lateral_esquerda .lista_mensagens .item:eq(0)").click(),$(".lateral_esquerda .lista_mensagens .item:eq(0)").click($(".lateral_esquerda .lista_mensagens .item:eq(0)").animate({scrollTop:50*response.messages.length},"1000")),setInterval(function(){$(".lista_mensagens .item.active").click()},1e3))),$(".btn-seguir").on("click",function(){var e=$(this).next().val(),a=$(this).next().next().val();$.ajax({url:"setFriendship",dataType:"json",method:"GET",data:{id_user:e,id_user_logedIn:a},success:function(e){"1"==e.status&&$(this).html(e.text_html)}})})}),$(document).ready(function(){jQuery().ajaxForm&&$("form.form_ajax").length&&$("form.form_ajax").on("submit",function(e){e.preventDefault();var a=$(this),s=a.children(".alerta");return a.ajaxSubmit({dataType:"json",success:function(e){console.log(e),e.msg&&s.html(e.msg),"0"!=e.status?s.addClass("success"):s.addClass("error"),e.page_redirect&&(window.location=e.page_redirect),e.reset_form&&a[0].reset(),e.alert_hidden&&setTimeout(()=>{s.html(""),s.removeClass("success"),s.removeClass("error")},1500)}}),!1})});